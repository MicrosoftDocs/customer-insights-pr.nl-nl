---
title: Experimenten met Machine Learning Studio (klassiek)
description: Gebruik Machine Learning Studio-modellen (klassiek) in Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 71881f7e1f9448fe0a7d6d92b8102b8b42de7c2a
ms.sourcegitcommit: bae40184312ab27b95c140a044875c2daea37951
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 03/15/2021
ms.locfileid: "5598333"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="f44a4-103">Modellen op basis van Azure Machine Learning Studio (klassiek) gebruiken</span><span class="sxs-lookup"><span data-stu-id="f44a4-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="f44a4-104">De geharmoniseerde gegevens in Dynamics 365 Customer Insights zijn een bron voor het bouwen van Machine Learning-modellen die aanvullende zakelijke inzichten kunnen genereren.</span><span class="sxs-lookup"><span data-stu-id="f44a4-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="f44a4-105">Customer Insights kan worden geïntegreerd met Machine Learning Studio (klassiek) om uw eigen aangepaste modellen te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="f44a4-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="f44a4-106">Zie [Experimenten met Azure Machine Learning](azure-machine-learning-experiments.md) om te zien hoe modellen die zijn ontwikkeld in Azure Machine Learning, zijn geïntegreerd met Customer Insights.</span><span class="sxs-lookup"><span data-stu-id="f44a4-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f44a4-107">Vereisten</span><span class="sxs-lookup"><span data-stu-id="f44a4-107">Prerequisites</span></span>

- <span data-ttu-id="f44a4-108">Toegang tot Customer Insights</span><span class="sxs-lookup"><span data-stu-id="f44a4-108">Access to Customer Insights</span></span>
- <span data-ttu-id="f44a4-109">Actief Azure Enterprise-abonnement</span><span class="sxs-lookup"><span data-stu-id="f44a4-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="f44a4-110">Geharmoniseerde klantprofielen</span><span class="sxs-lookup"><span data-stu-id="f44a4-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="f44a4-111">[Het exporteren van entiteiten naar Azure Blob-opslag](export-azure-blob-storage.md) instellen</span><span class="sxs-lookup"><span data-stu-id="f44a4-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="f44a4-112">Machine Learning Studio (klassiek) instellen</span><span class="sxs-lookup"><span data-stu-id="f44a4-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="f44a4-113">In een eerste stap moeten we een werkruimte maken voor en Machine Learning Studio (klassiek) openen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="f44a4-114">Ga naar [https://www.portal.azure.com](https://www.portal.azure.com/) en meld u aan.</span><span class="sxs-lookup"><span data-stu-id="f44a4-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="f44a4-115">Selecteer **Een resource maken**.</span><span class="sxs-lookup"><span data-stu-id="f44a4-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="f44a4-116">Zoek **Machine Learning Studio-werkruimte** en selecteer **Maken**.</span><span class="sxs-lookup"><span data-stu-id="f44a4-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="f44a4-117">Voer de vereiste gegevens in voor het [maken van de werkruimte](/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="f44a4-117">Enter the required details to [create the workspace](/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="f44a4-118">Kies het **Prijsniveau voor webservice-abonnement** op basis van de hoeveelheid gegevens die u wilt importeren.</span><span class="sxs-lookup"><span data-stu-id="f44a4-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="f44a4-119">Selecteer voor de beste prestaties de **locatie** die geografisch het dichtst in de buurt is.</span><span class="sxs-lookup"><span data-stu-id="f44a4-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="f44a4-120">Nadat u de resource hebt gemaakt, wordt het dashboard voor de Machine Learning Studio-werkruimte weergegeven.</span><span class="sxs-lookup"><span data-stu-id="f44a4-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="f44a4-121">Selecteer **Machine Learning Studio starten**.</span><span class="sxs-lookup"><span data-stu-id="f44a4-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Gebruikersinterface van Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="f44a4-123">Werken met Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="f44a4-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="f44a4-124">U kunt nu een nieuw experiment maken of een bestaande experimentsjabloon importeren vanuit de voorbeeldgalerie.</span><span class="sxs-lookup"><span data-stu-id="f44a4-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="f44a4-125">Er zijn voorbeeldexperimenten voor drie standaardscenario's:</span><span class="sxs-lookup"><span data-stu-id="f44a4-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="f44a4-126">Voorspelling voor verloop</span><span class="sxs-lookup"><span data-stu-id="f44a4-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="f44a4-127">Levensduurwaarde van klant</span><span class="sxs-lookup"><span data-stu-id="f44a4-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="f44a4-128">Productaanbeveling of op één na beste actie</span><span class="sxs-lookup"><span data-stu-id="f44a4-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="f44a4-129">Als u een nieuw experiment maakt of een experimentsjabloon uit de galerie gebruikt, moet u de eigenschappen voor **Gegevens importeren** configureren.</span><span class="sxs-lookup"><span data-stu-id="f44a4-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="f44a4-130">Gebruik de geleide ervaring of geef rechtstreeks details op om toegang te krijgen tot de Azure Blob Storage die uw gegevens bevat.</span><span class="sxs-lookup"><span data-stu-id="f44a4-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Experiment in Azure Machine Learning Studio](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="f44a4-132">Nu kunt u een aangepaste verwerkingspipeline bouwen om de gegevens op te schonen en voor te verwerken, functies te extraheren en een geschikt model te trainen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="f44a4-133">Test en optimaliseer de modelprestaties.</span><span class="sxs-lookup"><span data-stu-id="f44a4-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="f44a4-134">Selecteer, als u tevreden bent met de kwaliteit van een model, de optie **Webservice instellen** > **Voorspellende webservice**.</span><span class="sxs-lookup"><span data-stu-id="f44a4-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="f44a4-135">Deze optie importeert het getrainde model en de pipeline voor featurisatie vanuit het trainingsexperiment naar een voorspellende service.</span><span class="sxs-lookup"><span data-stu-id="f44a4-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="f44a4-136">De voorspellende service kan een andere set invoergegevens gebruiken met het schema dat in het trainingsexperiment wordt gebruikt om voorspellingen te doen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Een voorspellende webservice instellen](media/predictive-webservice-control.png)

1. <span data-ttu-id="f44a4-138">Zodra het experiment met de voorspellende webservice is geslaagd, kunt u het implementeren voor automatische planning.</span><span class="sxs-lookup"><span data-stu-id="f44a4-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="f44a4-139">Als u de webservice wilt laten werken met Customer Insights selecteert u **Webservice implementeren** > **Webservice implementeren [Nieuw] Preview**.</span><span class="sxs-lookup"><span data-stu-id="f44a4-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="f44a4-140">[Meer informatie over het implementeren van een webservice](/azure/machine-learning/studio/deploy-a-machine-learning-web-service)</span><span class="sxs-lookup"><span data-stu-id="f44a4-140">[Learn more about deploying a web service](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Een voorspellende webservice implementeren](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="f44a4-142">Voorbeeldmodellen uit de galerie</span><span class="sxs-lookup"><span data-stu-id="f44a4-142">Sample models from the gallery</span></span>

<span data-ttu-id="f44a4-143">We gebruiken een fictief scenario van Contoso Hotel voor de modellen in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="f44a4-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="f44a4-144">Contoso Hotel verzamelt de volgende gegevens:</span><span class="sxs-lookup"><span data-stu-id="f44a4-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="f44a4-145">CRM-gegevens bestaande uit hotelverblijfsactiviteiten.</span><span class="sxs-lookup"><span data-stu-id="f44a4-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="f44a4-146">De gegevensset bevat informatie over de verblijfsdatum voor elke geregistreerde klant.</span><span class="sxs-lookup"><span data-stu-id="f44a4-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="f44a4-147">Het bevat ook informatie over de boeking, kamertypen, details van uitgaven enzovoort.</span><span class="sxs-lookup"><span data-stu-id="f44a4-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="f44a4-148">De gegevens beslaan vier jaar, van januari 2014 tot januari 2018.</span><span class="sxs-lookup"><span data-stu-id="f44a4-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="f44a4-149">Klantprofielen van hotelgasten.</span><span class="sxs-lookup"><span data-stu-id="f44a4-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="f44a4-150">Deze profielen bevatten informatie over elke klant, inclusief hun naam, geboortedatum, postadres, geslacht en telefoonnummer.</span><span class="sxs-lookup"><span data-stu-id="f44a4-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="f44a4-151">Gebruik van door het hotel aangeboden services, zoals de spa, wasserette, Wi-Fi of koerier.</span><span class="sxs-lookup"><span data-stu-id="f44a4-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="f44a4-152">Deze informatie wordt voor elke geregistreerde klant vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="f44a4-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="f44a4-153">Het gebruik van services is doorgaans gekoppeld aan het verblijf.</span><span class="sxs-lookup"><span data-stu-id="f44a4-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="f44a4-154">In sommige gevallen kunnen services door klanten worden gebruikt zonder dat zij in het hotel verblijven.</span><span class="sxs-lookup"><span data-stu-id="f44a4-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="f44a4-155">Verloopanalyse</span><span class="sxs-lookup"><span data-stu-id="f44a4-155">Churn Analysis</span></span>

<span data-ttu-id="f44a4-156">Verloopanalyse is van toepassing op verschillende bedrijfsgebieden.</span><span class="sxs-lookup"><span data-stu-id="f44a4-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="f44a4-157">In dit voorbeeld gaan we kijken naar het serviceverloop, specifiek in de context van hotelservices, zoals hierboven beschreven.</span><span class="sxs-lookup"><span data-stu-id="f44a4-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="f44a4-158">Het biedt een werkend voorbeeld van een end-to-end-modelpijplijn die kan worden gebruikt als startpunt voor elk ander type verloopmodel.</span><span class="sxs-lookup"><span data-stu-id="f44a4-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="f44a4-159">Definitie van verloop</span><span class="sxs-lookup"><span data-stu-id="f44a4-159">Definition of Churn</span></span>

<span data-ttu-id="f44a4-160">De definitie van verloop kan per scenario verschillen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="f44a4-161">In dit voorbeeld moet van verloop worden gesproken als een gast het hotel het afgelopen jaar niet heeft bezocht.</span><span class="sxs-lookup"><span data-stu-id="f44a4-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="f44a4-162">De experimentsjabloon kan vanuit de galerie worden geïmporteerd.</span><span class="sxs-lookup"><span data-stu-id="f44a4-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="f44a4-163">Zorg er eerst voor dat u de gegevens importeert voor **Hotelverblijfsactiviteit**, **Klantgegevens** en **Servicegebruiksgegevens** vanuit Azure Blob-opslag.</span><span class="sxs-lookup"><span data-stu-id="f44a4-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Gegevens importeren voor verloopmodel](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="f44a4-165">Featurisatie</span><span class="sxs-lookup"><span data-stu-id="f44a4-165">Featurization</span></span>

<span data-ttu-id="f44a4-166">Op basis van de definitie van verloop identificeren we eerst de onbewerkte functies die het label zullen beïnvloeden.</span><span class="sxs-lookup"><span data-stu-id="f44a4-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="f44a4-167">Vervolgens verwerken we deze onbewerkte functies tot numerieke functies die kunnen worden gebruikt met Machine Learning-modellen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="f44a4-168">Gegevensintegratie vindt plaats in Customer Insights, zodat we deze tabellen kunnen samenvoegen met behulp van de *Klant-id*.</span><span class="sxs-lookup"><span data-stu-id="f44a4-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Geïmporteerde gegevens samenvoegen](media/join-imported-data.png)

<span data-ttu-id="f44a4-170">Het maken van functies voor het bouwen van het model voor verloopanalyse kan een beetje lastig zijn.</span><span class="sxs-lookup"><span data-stu-id="f44a4-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="f44a4-171">De gegevens zijn een functie van de tijd waarbij dagelijks nieuwe hotelactiviteit wordt geregistreerd.</span><span class="sxs-lookup"><span data-stu-id="f44a4-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="f44a4-172">Tijdens de featurisatie willen we statische functies genereren vanuit de dynamische gegevens.</span><span class="sxs-lookup"><span data-stu-id="f44a4-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="f44a4-173">In dit geval genereren we meerdere functies van hotelactiviteit met een schuivend venster van één jaar.</span><span class="sxs-lookup"><span data-stu-id="f44a4-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="f44a4-174">We breiden ook de categorische functies zoals kamertype of boekingstype uit naar afzonderlijke functies met behulp van one-hot-codering.</span><span class="sxs-lookup"><span data-stu-id="f44a4-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="f44a4-175">Definitieve lijst met functies:</span><span class="sxs-lookup"><span data-stu-id="f44a4-175">Final list of features:</span></span>

| <span data-ttu-id="f44a4-176">**Nummer**</span><span class="sxs-lookup"><span data-stu-id="f44a4-176">**Number**</span></span>  | <span data-ttu-id="f44a4-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="f44a4-177">**Original_Column**</span></span>          | <span data-ttu-id="f44a4-178">**Afgeleide functies**</span><span class="sxs-lookup"><span data-stu-id="f44a4-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f44a4-179">1</span><span class="sxs-lookup"><span data-stu-id="f44a4-179">1</span></span>           | <span data-ttu-id="f44a4-180">Kamertype</span><span class="sxs-lookup"><span data-stu-id="f44a4-180">Room Type</span></span>                    | <span data-ttu-id="f44a4-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="f44a4-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="f44a4-182">2</span><span class="sxs-lookup"><span data-stu-id="f44a4-182">2</span></span>           | <span data-ttu-id="f44a4-183">Type boeking</span><span class="sxs-lookup"><span data-stu-id="f44a4-183">Booking Type</span></span>                 | <span data-ttu-id="f44a4-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="f44a4-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="f44a4-185">3</span><span class="sxs-lookup"><span data-stu-id="f44a4-185">3</span></span>           | <span data-ttu-id="f44a4-186">Reiscategorie</span><span class="sxs-lookup"><span data-stu-id="f44a4-186">Travel Category</span></span>              | <span data-ttu-id="f44a4-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="f44a4-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="f44a4-188">4</span><span class="sxs-lookup"><span data-stu-id="f44a4-188">4</span></span>           | <span data-ttu-id="f44a4-189">Uitgegeven dollars</span><span class="sxs-lookup"><span data-stu-id="f44a4-189">Dollars Spent</span></span>                | <span data-ttu-id="f44a4-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="f44a4-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="f44a4-191">5</span><span class="sxs-lookup"><span data-stu-id="f44a4-191">5</span></span>           | <span data-ttu-id="f44a4-192">In- en uitcheckdatum</span><span class="sxs-lookup"><span data-stu-id="f44a4-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="f44a4-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="f44a4-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="f44a4-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="f44a4-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="f44a4-195">6</span><span class="sxs-lookup"><span data-stu-id="f44a4-195">6</span></span>           | <span data-ttu-id="f44a4-196">Servicegebruik</span><span class="sxs-lookup"><span data-stu-id="f44a4-196">Service Usage</span></span>                | <span data-ttu-id="f44a4-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="f44a4-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="f44a4-198">Modelselectie</span><span class="sxs-lookup"><span data-stu-id="f44a4-198">Model selection</span></span>

<span data-ttu-id="f44a4-199">Nu moeten we het optimale algoritme kiezen om te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="f44a4-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="f44a4-200">In dit geval zijn de meeste functies gebaseerd op categorische functies.</span><span class="sxs-lookup"><span data-stu-id="f44a4-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="f44a4-201">Op beslissingsstructuren gebaseerde modellen werken doorgaans goed.</span><span class="sxs-lookup"><span data-stu-id="f44a4-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="f44a4-202">Als er alleen numerieke functies zijn, kunnen neurale netwerken een betere keuze zijn.</span><span class="sxs-lookup"><span data-stu-id="f44a4-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="f44a4-203">Support Vector Machine (SVM) is eveneens een goede kandidaat in dergelijke situaties. Dit vereist echter nogal wat afstemming om de beste prestaties te verkrijgen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="f44a4-204">We kiezen **Two-Class Boosted Decision Tree** als het eerste model naar keuze, gevolgd door **Two-Class SVM** als het tweede model.</span><span class="sxs-lookup"><span data-stu-id="f44a4-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="f44a4-205">Met Azure Machine Learning Studio kunt u A/B-tests uitvoeren, dus is het gunstig om met twee modellen te beginnen in plaats van één.</span><span class="sxs-lookup"><span data-stu-id="f44a4-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="f44a4-206">De volgende afbeelding toont de pipeline voor training en evaluatie van het model in Azure Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="f44a4-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Verloopmodel in Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="f44a4-208">We passen ook een techniek toe genaamd **Permutation Feature Importance**, een belangrijk aspect van modeloptimalisatie.</span><span class="sxs-lookup"><span data-stu-id="f44a4-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="f44a4-209">Ingebouwde modellen hebben weinig tot geen inzicht in de impact van een specifieke functie op de uiteindelijke voorspelling.</span><span class="sxs-lookup"><span data-stu-id="f44a4-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="f44a4-210">De calculator voor functiebelang gebruikt een aangepast algoritme om de invloed van individuele functies op de uitkomst voor een specifiek model te berekenen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="f44a4-211">Het functiebelang wordt genormaliseerd tussen +1 en -1.</span><span class="sxs-lookup"><span data-stu-id="f44a4-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="f44a4-212">Een negatieve invloed betekent dat de overeenkomstige functie een contra-intuïtieve invloed heeft op de uitkomst en uit het model moet worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="f44a4-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="f44a4-213">Een positieve invloed geeft aan dat de functie een grote bijdrage levert aan de voorspelling.</span><span class="sxs-lookup"><span data-stu-id="f44a4-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="f44a4-214">Deze waarden zijn geen correlatiecoëfficiënten, aangezien het verschillende metrische gegevens zijn.</span><span class="sxs-lookup"><span data-stu-id="f44a4-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="f44a4-215">Zie [Permutation Feature Importance](/azure/machine-learning/studio-module-reference/permutation-feature-importance) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="f44a4-215">For more information, see [Permutation Feature Importance](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="f44a4-216">Het hele [verloopexperiment is beschikbaar in de Azure AI-galerie](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="f44a4-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="f44a4-217">Voorspelling van klantlevensduur</span><span class="sxs-lookup"><span data-stu-id="f44a4-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="f44a4-218">De berekening van de klantlevensduur (CLTV) is een van de belangrijkste meetgegevens die een bedrijf kan gebruiken om zijn klanten te beoordelen en te segmenteren.</span><span class="sxs-lookup"><span data-stu-id="f44a4-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="f44a4-219">Voor het hotelwezen is het van cruciaal belang om hun klanten te kennen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="f44a4-220">Het begrijpen van factoren die gasten tot goede klanten maken, is bijvoorbeeld cruciale informatie.</span><span class="sxs-lookup"><span data-stu-id="f44a4-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="f44a4-221">Het helpt het hotelmanagement te beoordelen op welke functies ze zich moeten concentreren en deze moeten verbeteren om hun goedbetaalde klanten tevreden te stellen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="f44a4-222">Deze beslissingen kunnen een directe impact hebben op omzet en winst.</span><span class="sxs-lookup"><span data-stu-id="f44a4-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="f44a4-223">Definitie van CLTV</span><span class="sxs-lookup"><span data-stu-id="f44a4-223">Definition of CLTV</span></span>

<span data-ttu-id="f44a4-224">Voor dit voorbeeld definiëren we de CLTV van een klant als het totale bedrag in dollars dat de klant naar verwachting in de komende 365 dagen zal uitgeven.</span><span class="sxs-lookup"><span data-stu-id="f44a4-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="f44a4-225">We gaan de gegevens van de afgelopen drie jaar gebruiken voor alle klanten om deze waarde te voorspellen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="f44a4-226">Featurisatie</span><span class="sxs-lookup"><span data-stu-id="f44a4-226">Featurization</span></span>

<span data-ttu-id="f44a4-227">In dit geval zal featurisatie veel lijken op het verloopscenario.</span><span class="sxs-lookup"><span data-stu-id="f44a4-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="f44a4-228">De labels en voorspelde waarden zijn echter anders dan hierboven gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="f44a4-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="f44a4-229">Modelselectie</span><span class="sxs-lookup"><span data-stu-id="f44a4-229">Model selection</span></span>

<span data-ttu-id="f44a4-230">Het voorspellen van de CLTV is een regressieprobleem, aangezien de voorspelde waarde een continue variabele met een positieve waarde is.</span><span class="sxs-lookup"><span data-stu-id="f44a4-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="f44a4-231">Op basis van de functie-eigenschappen selecteren we **Boosted Decision Tree Regression** als één algoritme en **Neural Network Regression** als een ander algoritme voor het trainen van het model.</span><span class="sxs-lookup"><span data-stu-id="f44a4-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="f44a4-232">Productaanbeveling of op één na beste actie</span><span class="sxs-lookup"><span data-stu-id="f44a4-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="f44a4-233">Productaanbeveling in een hotelscenario wordt geïnterpreteerd als het aanbevelen van services die door het hotel aan de klanten worden aangeboden.</span><span class="sxs-lookup"><span data-stu-id="f44a4-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="f44a4-234">Het doel is om de juiste services voor klanten te kiezen, zodat hun gebruik wordt gemaximaliseerd.</span><span class="sxs-lookup"><span data-stu-id="f44a4-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="f44a4-235">Het is vergelijkbaar met filmaanbevelingen voor gebruikers van videostreamingservices.</span><span class="sxs-lookup"><span data-stu-id="f44a4-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="f44a4-236">Definitie van productaanbeveling of op één na beste actie</span><span class="sxs-lookup"><span data-stu-id="f44a4-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="f44a4-237">We definiëren het doel als het maximaliseren van het bedrag aan servicegebruik in dollars door hotelklanten de best passende services aan te bieden op basis van hun interesse.</span><span class="sxs-lookup"><span data-stu-id="f44a4-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="f44a4-238">Featurisatie</span><span class="sxs-lookup"><span data-stu-id="f44a4-238">Featurization</span></span>

<span data-ttu-id="f44a4-239">Net als bij het verloopmodel voegen we de ServiceCustomerID voor het hotel toe aan CustomerID om consistente aanbevelingen per CustomerID op te bouwen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Featurisatie voor het aanbevelingsmodel](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="f44a4-241">De gegevens zijn afkomstig van drie verschillende entiteiten en er worden functies van afgeleid.</span><span class="sxs-lookup"><span data-stu-id="f44a4-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="f44a4-242">De featurisatie voor het probleem van aanbeveling is anders in vergelijking met verloop- of CLTV-scenario's.</span><span class="sxs-lookup"><span data-stu-id="f44a4-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="f44a4-243">Het aanbevelingsmodel heeft invoergegevens nodig in de vorm van drie reeksen functies.</span><span class="sxs-lookup"><span data-stu-id="f44a4-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="f44a4-244">Modelselectie</span><span class="sxs-lookup"><span data-stu-id="f44a4-244">Model selection</span></span>

<span data-ttu-id="f44a4-245">We voorspellen producten of services met behulp van het algoritme genaamd **Train Matchbox Recommender** om het aanbevelingsmodel te trainen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algoritme voor productaanbevelingen](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="f44a4-247">De drie invoerpoorten voor het model **Train Matchbox Recommender** neemt de gebruiksgegevens van de trainingsservice, de klantbeschrijving (optioneel) en de servicebeschrijving op.</span><span class="sxs-lookup"><span data-stu-id="f44a4-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="f44a4-248">Er zijn drie verschillende manieren om het model te scoren.</span><span class="sxs-lookup"><span data-stu-id="f44a4-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="f44a4-249">Een daarvan is voor modelevaluatie waarbij een NDCG-score (Normalized Discounted Cumulative Gain) wordt berekend om de beoordeelde items te rangschikken.</span><span class="sxs-lookup"><span data-stu-id="f44a4-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="f44a4-250">In dit experiment hebben we de NDCG-score vastgesteld op 0,97.</span><span class="sxs-lookup"><span data-stu-id="f44a4-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="f44a4-251">De andere twee opties zijn het scoren van het model op de gehele aanbevolen servicecatalogus of alleen op items die gebruikers niet eerder hebben gebruikt.</span><span class="sxs-lookup"><span data-stu-id="f44a4-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="f44a4-252">Als we verder kijken naar de verdelingen van de aanbevelingen over de hele servicecatalogus, zien we dat telefoon, wifi en koerier de topservices zijn die moeten worden aanbevolen.</span><span class="sxs-lookup"><span data-stu-id="f44a4-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="f44a4-253">Dit komt overeen met wat we hebben gevonden in de distributies van de serviceverbruiksgegevens:</span><span class="sxs-lookup"><span data-stu-id="f44a4-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Uitvoer van aanbevelingsmodel](media/azure-machine-learning-model-output.png)

<span data-ttu-id="f44a4-255">Het hele [productaanbevelingsexperiment is toegankelijk in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="f44a4-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="f44a4-256">Aangepaste modellen integreren</span><span class="sxs-lookup"><span data-stu-id="f44a4-256">Integrate custom models</span></span>

<span data-ttu-id="f44a4-257">Om deze voorspellingen te gebruiken in Customer Insights, moet u de voorspellingen **exporteren** samen met de klant-id's.</span><span class="sxs-lookup"><span data-stu-id="f44a4-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="f44a4-258">[Exporteer ze naar dezelfde Azure Blob-opslaglocatie](/azure/storage/common/storage-import-export-data-from-blobs) waarnaar u de brongegevens exporteert.</span><span class="sxs-lookup"><span data-stu-id="f44a4-258">[Export them to the same Azure Blob storage location](/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="f44a4-259">De voorspellende webservice kan zodanig worden gepland dat deze regelmatig wordt uitgevoerd en dat de scores worden bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="f44a4-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="f44a4-260">Gegevens die door het aangepaste model worden gegenereerd, kunnen worden gebruikt om uw klantgegevens verder te verrijken.</span><span class="sxs-lookup"><span data-stu-id="f44a4-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="f44a4-261">Zie [Aangepaste Machine Learning-modellen](custom-models.md) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="f44a4-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]